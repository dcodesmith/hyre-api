<!DOCTYPE html>
<html lang="en">
<head>
	<title>Cucumber</title>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20class%3D%22ml-3%20ml-md-0%22%20viewBox%3D%220%200%2040.59%2046.31%22%20width%3D%2240.59%22%20height%3D%2246.31%22%3E%0A%20%20%20%20%3Cg%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20fill%3D%22%2323d96c%22%20fill-rule%3D%22evenodd%22%20d%3D%22M30.283%203.645q-.528-.317-1.08-.593a16.164%2016.164%200%2000-1.154-.518c-.124-.052-.247-.1-.372-.149-.343-.127-.689-.268-1.042-.371a19.427%2019.427%200%2010-9.792%2037.51v5.56c11.676-1.753%2022.016-10.979%2022.787-23.093.459-7.289-3.193-14.73-9.347-18.346z%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20fill%3D%22%23173647%22%20d%3D%22M15.787%2046.307v-5.935A20.472%2020.472%200%201126.959%201.015c.274.08.557.187.832.291l.248.093c.165.064.291.113.417.167.348.137.739.313%201.208.543q.589.295%201.153.633c6.393%203.756%2010.354%2011.518%209.857%2019.316-.763%2012-10.722%2022.122-23.679%2024.067zm4.8-44.214h-.026a18.366%2018.366%200%2000-3.524%2036.408l.85.165v5.18c11.392-2.224%2020.009-11.272%2020.686-21.922.448-7.033-3.1-14.018-8.83-17.383l-.008-.005A14.691%2014.691%200%200027.654%203.5a5.74%205.74%200%2000-.344-.138l-.27-.1a9.49%209.49%200%2000-.708-.249%2018.425%2018.425%200%2000-5.743-.92z%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20fill%3D%22%23173647%22%20fill-rule%3D%22evenodd%22%20d%3D%22M16.666%2010.58a1.8%201.8%200%20011.583.608%204.184%204.184%200%2001.728%201.107c.645%201.422%201.027%203.461.23%204.605a6.334%206.334%200%2001-3.981-3.087%203.236%203.236%200%2001-.347-1.339%201.957%201.957%200%20011.787-1.894zm-5.683%208.025a7.742%207.742%200%20001.218.737%205.789%205.789%200%20004.883-.138%206.116%206.116%200%2000-3.345-3.45%203.664%203.664%200%2000-1.442-.321%201.884%201.884%200%2000-.319%200%201.766%201.766%200%2000-.995%203.172zm6.1%203.433c-.777-.518-2.379-.309-3.312-.292a4.416%204.416%200%2000-1.666.352%203.5%203.5%200%2000-1.218.738%201.817%201.817%200%20001.409%203.171%203.3%203.3%200%20001.442-.321c1.436-.62%203.141-2.32%203.346-3.648zm2.61%202a6.556%206.556%200%2000-3.724%203.506%203.091%203.091%200%2000-.321%201.314%201.907%201.907%200%20003.3%201.346%207.422%207.422%200%2000.7-1.218c.621-1.333.866-3.72.046-4.948zm2.557-7.167a5.941%205.941%200%20003.7-3.167%203.243%203.243%200%2000.319-1.346%201.915%201.915%200%2000-1.794-1.954%201.832%201.832%200%2000-1.6.641%207.382%207.382%200%2000-.705%201.218c-.62%201.434-.842%203.48.081%204.603zm4.208%2012.115a3.244%203.244%200%2000-.321-1.345%205.869%205.869%200%2000-3.554-3.269%205.386%205.386%200%2000-.226%204.711%204.147%204.147%200%2000.7%201.121c1.133%201.23%203.505.32%203.402-1.218zm4.2-6.28a7.466%207.466%200%2000-1.217-.7%204.425%204.425%200%2000-1.666-.352%206.4%206.4%200%2000-3.188.555%205.959%205.959%200%20003.316%203.386%203.672%203.672%200%20001.442.32%201.8%201.8%200%20001.31-3.209z%22%2F%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E">
	<style>
body{padding:0;margin:0}.html-formatter{max-width:1600px;min-height:100vh;margin:0 auto}
.XR3QM0DC8dUJX1FPQBu_{background-color:var(--cucumber-panel-accent-color, #e8e8e8);border:1px solid rgba(0,0,0,0)}.jjG3rnQfHnX9wBgX_idP{display:grid;grid-template-columns:repeat(12, 1fr);grid-template-rows:1fr 1fr;gap:1px;margin:0;text-align:center}.rfv832DGvJuGyzFuMjXC{grid-column-end:span 4;display:flex;flex-direction:column-reverse;justify-content:center;padding:1.5em;background-color:var(--cucumber-background-color, white);color:var(--cucumber-text-color, #222)}.ZObJrdGWGYZYqvRPTO7x,.ZObJrdGWGYZYqvRPTO7x~.rfv832DGvJuGyzFuMjXC{grid-column-end:span 3}.OFz0nWrlbIgqinwc4usO{font-weight:bold;font-size:1.25em;margin:0}.OFz0nWrlbIgqinwc4usO svg{max-width:2em}.xmSDOQ_c8MimWxT035vV{font-size:1em;margin-top:.25em;color:var(--cucumber-code-text-color, #666)}.PUJ_q_3Y8RQhAcXxakiL{display:inline-flex;gap:.25em}.PUJ_q_3Y8RQhAcXxakiL+.PUJ_q_3Y8RQhAcXxakiL{margin-left:1em}.PUJ_q_3Y8RQhAcXxakiL a{color:var(--cucumber-anchor-color, #297bde)}
.E4mSCqTkr4getx0W9smB{margin-bottom:1.5em}.E4mSCqTkr4getx0W9smB>*{border-top:0 !important}
.gUbOxW8Yux5FNeSfsI2O{position:relative;display:flex;align-items:center}.AEvAM9M_0ZxmJghPdVQs{color:var(--cucumber-anchor-color, #297bde);opacity:0;transition:all .35s ease-in-out;position:absolute;font-size:.75em;left:var(--cucumber-anchor-offset, -1.1em)}.gUbOxW8Yux5FNeSfsI2O:hover .AEvAM9M_0ZxmJghPdVQs{opacity:1}
.pzfx7tCRXyytC6g9SDxg{display:flex;align-items:center;gap:4px;background-color:rgba(0,0,0,0);color:var(--cucumber-anchor-color, #297bde);font-family:inherit;font-size:inherit;padding:0;border:0;margin:0 0 .5em 0;cursor:pointer}.pzfx7tCRXyytC6g9SDxg:hover,.pzfx7tCRXyytC6g9SDxg:focus{text-decoration:underline}
.Cbm1hRh_nuzVXaBR2dZ0{white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.875em;padding:.666em .75em;border-radius:.25em;margin:0;overflow-x:auto;background-color:var(--cucumber-code-background-color, #f6f8fa);color:var(--cucumber-code-text-color, #666)}.p1VipAhIVu_6GwqL_EUw{margin-right:.75em;opacity:.333}.ORaS_8RRNPuyNQTWStAR{max-width:100%;margin-top:.5em}
.gXG0xG1TJk_4pdoSxoAf{white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.875em;padding:.666em .75em;border-radius:.25em;margin:0;overflow-x:auto;background-color:var(--cucumber-error-background-color, #fff0f0);color:var(--cucumber-error-text-color, #bd0a2b)}
.IWgpmOz8r6Wj2YWzioT1{padding:0;margin:1em}.IWgpmOz8r6Wj2YWzioT1 a{color:var(--cucumber-anchor-color, #297bde)}
.MNkrrVMCDeB7mTXs5do4{border-collapse:collapse;margin:0}.MNkrrVMCDeB7mTXs5do4 thead tr{border-bottom:6px solid rgba(0,0,0,0)}.MNkrrVMCDeB7mTXs5do4 tr+tr{border-top:6px solid rgba(0,0,0,0)}.MNkrrVMCDeB7mTXs5do4 th,.MNkrrVMCDeB7mTXs5do4 td{padding:.4em .6em;border-width:2px;border-style:solid;border-top:none;border-bottom:none;border-color:var(--cucumber-keyword-color, #000080);color:var(--cucumber-parameter-color, #297bde)}
.buWCECLHpnDfpwKwugOX{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:var(--cucumber-docstring-color, #008080);padding-bottom:.25em;margin:0;overflow-x:auto}.buWCECLHpnDfpwKwugOX::before,.buWCECLHpnDfpwKwugOX::after{content:'"""';display:block;transform:translateY(0.25em)}.buWCECLHpnDfpwKwugOX::before{padding-bottom:.25em}.buWCECLHpnDfpwKwugOX::after{padding-top:.25em}
.KqWCaxcpp4sxz7A20RLA{font-weight:bold;color:var(--cucumber-keyword-color, #000080);margin-right:.5em}
.jraSbOu3Xpk7mbUgodqc{font-weight:normal;color:var(--cucumber-parameter-color, #297bde)}
.j0ln79cSlRB4hNiHeXjH[data-status=PASSED]{color:rgba(44,177,74,.667)}.j0ln79cSlRB4hNiHeXjH[data-status=SKIPPED]{color:rgba(0,160,204,.667)}.j0ln79cSlRB4hNiHeXjH[data-status=PENDING]{color:rgba(255,173,51,.667)}.j0ln79cSlRB4hNiHeXjH[data-status=UNDEFINED]{color:rgba(255,173,51,.667)}.j0ln79cSlRB4hNiHeXjH[data-status=AMBIGUOUS]{color:rgba(244,235,253,.667)}.j0ln79cSlRB4hNiHeXjH[data-status=FAILED]{color:rgba(187,0,0,.667)}.j0ln79cSlRB4hNiHeXjH[data-status=UNKNOWN]{color:rgba(182,190,203,.667)}
.UXBAOOwgLjqbpb8XD1WL{display:flex;--cucumber-anchor-offset: -3.25em}.kDEmgsysGXM7DgTGCWfs{width:1.5em;padding-top:.1em}.rIuf66pcn5inse3YjseZ{flex-grow:1;max-width:calc(100% - 1.5em)}.rIuf66pcn5inse3YjseZ>*+*{margin-top:.25em !important}
.vf7CPB8kAcns60tKI7vY{display:inline-block;font-weight:normal;padding:0;margin:0}
.bbjk27OORIAhv9IbGaBL{padding:0;margin:1em}.bbjk27OORIAhv9IbGaBL>li{list-style:none}.bbjk27OORIAhv9IbGaBL>li+li{margin-top:.25em}
.vIGVFeZhSpvtjMv28qFg{padding:0;margin:1em}
.R_7odAGRh9ZWASbUwK3j{margin-left:1rem}
.Fdmm0s4soB2pkvNYXQbv{border-collapse:collapse;margin:0}.Fdmm0s4soB2pkvNYXQbv thead tr{border-bottom:6px solid rgba(0,0,0,0)}.Fdmm0s4soB2pkvNYXQbv tr+tr{border-top:6px solid rgba(0,0,0,0)}.Fdmm0s4soB2pkvNYXQbv th,.Fdmm0s4soB2pkvNYXQbv td{padding:.4em .6em;border-width:2px;border-style:solid;border-top:none;border-bottom:none;border-color:var(--cucumber-keyword-color, #000080);color:var(--cucumber-parameter-color, #297bde)}.Fdmm0s4soB2pkvNYXQbv th:first-child,.Fdmm0s4soB2pkvNYXQbv td:first-child{border-left:none}.Fdmm0s4soB2pkvNYXQbv tbody tr{cursor:pointer}
.FbgC7RSK7PrGGsNDRAl2{padding:0;margin:0}.QRN0XyDjb8RR6B4I3C5w{display:inline;list-style-type:none;padding:8px 0;color:var(--cucumber-tag-color, #808000)}.QRN0XyDjb8RR6B4I3C5w:not(:last-child){margin-right:10px}
.ETQctlyGyWWjcMYVPHxW{transform:rotate(45deg)}
.X9zF5mRApmhkNHKRv89A{padding:0;margin:1em}.X9zF5mRApmhkNHKRv89A>li{list-style:none}.X9zF5mRApmhkNHKRv89A>li+li{margin-top:.25em}
.aNBioFoTxXGy8fl89aVN{padding-top:.35em;padding-left:.5em;padding-right:.5em}.uH0tV61h4vEwGIdnLhmB{border:1px solid var(--cucumber-panel-accent-color, #e8e8e8);border-radius:2px}.tIbY7PZ2bzsj9dKjbfxb+.tIbY7PZ2bzsj9dKjbfxb{border-top:1px solid var(--cucumber-panel-accent-color, #e8e8e8)}.oxCzU1rC8VLhLfVMMrX2{box-sizing:border-box;width:100%;padding:.75em 1em;border:none;background-color:var(--cucumber-panel-background-color, #f4f4f4);color:var(--cucumber-panel-text-color, #444);cursor:pointer;text-align:left}.oxCzU1rC8VLhLfVMMrX2:hover{background-color:var(--cucumber-panel-accent-color, #e8e8e8)}.g2StHf8iOGfwMQe5f9rk{transform-origin:center center;transition:transform .2s linear}.oxCzU1rC8VLhLfVMMrX2[aria-expanded=true] .g2StHf8iOGfwMQe5f9rk,.oxCzU1rC8VLhLfVMMrX2[aria-selected=true] .g2StHf8iOGfwMQe5f9rk{transform:rotate(90deg)}.aSGVb3Tv5B8Nz24vToKW{padding:1.25em}
.rioeqbTEi_lL8FESsJqA{display:flex;flex-direction:column;align-items:center;gap:.5em;padding-bottom:1.5em;text-align:center}.xvCoYo7NPDqD900sFMjr{font-size:3em;opacity:.125}
.qCGgrwvVkkINDRfqpvsj{box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;width:100%;padding:1em;border:1px solid var(--cucumber-panel-accent-color, #e8e8e8);background-color:var(--cucumber-panel-background-color, #f4f4f4);color:var(--cucumber-panel-text-color, #444)}.bnRegjcAB_MU3kCnU0eO{position:relative;margin-top:-0.5em}.DnlYJBmP1_AfFSU3KSgD{position:absolute;left:0;margin-left:.4em;top:.5em;opacity:.666}.XhufRLVTP4kJj55pWlZQ{box-sizing:border-box;width:100%;padding:.5em 0 .5em 1.5em;font-family:inherit;font-size:inherit;background-color:rgba(0,0,0,0);color:var(--cucumber-text-color, #222);border:1px solid #ced4da;border-radius:.3em}.Pj6CVtDA4EslW8OfcTI9{display:block;font-size:.75em;line-height:1em;margin-top:.3em}.Pj6CVtDA4EslW8OfcTI9 a{color:var(--cucumber-anchor-color, #297bde)}.JPICQf5NjLq2IqfrDM06{display:flex;align-items:center;gap:.5em}.i7Lu8mj6UiHXs3uZahvK{display:flex;align-items:center;gap:.5em;list-style:none;padding:0;margin:0}.di7wOxuS_2Y1X70JnH4C{opacity:.666}.ue2HaGqIjpPqXt_Q__wa{display:flex;align-items:center;gap:1px;accent-color:var(--cucumber-anchor-color, #297bde)}
.jGf5f1r0vW6ApPrFIznv{list-style:none;display:flex;width:100%;padding:0;margin:0}.VlpRuYBlXtcShawgxgzA{box-sizing:border-box;flex-grow:1;min-width:11em;padding:.333em 2.5em;background-color:#000;color:#fff;white-space:nowrap;text-align:center;text-transform:uppercase}.VlpRuYBlXtcShawgxgzA[data-status=PASSED]{background-color:#2cb14a}.VlpRuYBlXtcShawgxgzA[data-status=SKIPPED]{background-color:#00a0cc}.VlpRuYBlXtcShawgxgzA[data-status=PENDING]{background-color:#ffad33}.VlpRuYBlXtcShawgxgzA[data-status=UNDEFINED]{background-color:#ffad33}.VlpRuYBlXtcShawgxgzA[data-status=AMBIGUOUS]{background-color:#f4ebfd}.VlpRuYBlXtcShawgxgzA[data-status=FAILED]{background-color:#b00}.VlpRuYBlXtcShawgxgzA[data-status=UNKNOWN]{background-color:#b6becb}
.g84sy6xgJUyJIzpsyG5S{font-size:14px;font-family:"Inter var",ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";color:var(--cucumber-text-color, #222);background:var(--cucumber-background-color, white)}.S07ZPK5i38Whpt0ARQ6p{--cucumber-background-color: #1d1d26;--cucumber-text-color: #c9c9d1;--cucumber-anchor-color: #4caaee;--cucumber-keyword-color: #d89077;--cucumber-parameter-color: #4caaee;--cucumber-tag-color: #85a658;--cucumber-docstring-color: #66a565;--cucumber-error-background-color: #cf6679;--cucumber-error-text-color: #222;--cucumber-code-background-color: #282a36;--cucumber-code-text-color: #f8f8f2;--cucumber-panel-background-color: #282a36;--cucumber-panel-accent-color: #313442;--cucumber-panel-text-color: #f8f8f2}@media all and (prefers-color-scheme: dark){.pPHXjw4HiiEZ76UmW2np{--cucumber-background-color: #1d1d26;--cucumber-text-color: #c9c9d1;--cucumber-anchor-color: #4caaee;--cucumber-keyword-color: #d89077;--cucumber-parameter-color: #4caaee;--cucumber-tag-color: #85a658;--cucumber-docstring-color: #66a565;--cucumber-error-background-color: #cf6679;--cucumber-error-text-color: #222;--cucumber-code-background-color: #282a36;--cucumber-code-text-color: #f8f8f2;--cucumber-panel-background-color: #282a36;--cucumber-panel-accent-color: #313442;--cucumber-panel-text-color: #f8f8f2}}

	</style>
</head>
<body>
<div id="content">
</div>
<script>
window.CUCUMBER_MESSAGES = [{"meta":{"protocolVersion":"24.1.0","implementation":{"version":"10.8.0","name":"cucumber-js"},"cpu":{"name":"arm64"},"os":{"name":"darwin","version":"23.2.0"},"runtime":{"name":"node.js","version":"22.9.0"}}},{"source":{"data":"@only @api @authentication\nFeature: OTP Authentication\n  As a user\n  I want to authenticate using email OTP\n  So that I can access the platform securely\n\n  Background:\n    Given the notification mock is cleared\n\n  Scenario: Registration - OTP authentication for new user\n    When I register with email \"newuser@example.com\" as \"customer\"\n    Then an OTP email should be sent to \"newuser@example.com\"\n    And I should be able to access the user profile\n\n  Scenario: Login - OTP authentication for existing user\n    When I authenticate with email \"existinguser@example.com\" as \"customer\"\n    Then an OTP email should be sent to \"existinguser@example.com\"\n    And I should be able to access the user profile\n\n  Scenario: Registration - Fleet owner OTP authentication\n    When I register with email \"fleetowner@example.com\" as \"fleetOwner\"\n    Then an OTP email should be sent to \"fleetowner@example.com\"\n    And I should be able to access the user profile\n\n  Scenario: Secure logout - Token invalidation and session cleanup\n    Given I authenticate with email \"testuser@example.com\" as \"customer\"\n    When I logout\n    Then I should not be able to access the user profile\n\n  Scenario: Fleet owner logout - Complete session termination\n    Given I register with email \"fleetowner.logout@example.com\" as \"fleetOwner\"\n    When I logout\n    Then I should not be able to access the user profile\n","uri":"test/features/authentication/otp-authentication.feature","mediaType":"text/x.cucumber.gherkin+plain"}},{"gherkinDocument":{"feature":{"tags":[{"location":{"line":1,"column":1},"name":"@only","id":"d831b33e-203c-48b4-a7d9-d046973cc478"},{"location":{"line":1,"column":7},"name":"@api","id":"576c3f19-6791-43eb-8023-6321d8aee492"},{"location":{"line":1,"column":12},"name":"@authentication","id":"65dbbf16-792a-4360-8c43-71e5601979a5"}],"location":{"line":2,"column":1},"language":"en","keyword":"Feature","name":"OTP Authentication","description":"  As a user\n  I want to authenticate using email OTP\n  So that I can access the platform securely","children":[{"background":{"id":"a2b564b5-b6a9-4aa2-b087-0f1645d40a38","location":{"line":7,"column":3},"keyword":"Background","name":"","description":"","steps":[{"id":"ff4e5486-57a7-4f52-8476-a7144a790bbc","location":{"line":8,"column":5},"keyword":"Given ","keywordType":"Context","text":"the notification mock is cleared"}]}},{"scenario":{"id":"57d2bc37-64ba-4029-ac29-25c3df13bd96","tags":[],"location":{"line":10,"column":3},"keyword":"Scenario","name":"Registration - OTP authentication for new user","description":"","steps":[{"id":"99d09543-8b8a-4d47-8d67-0bcebcf230e3","location":{"line":11,"column":5},"keyword":"When ","keywordType":"Action","text":"I register with email \"newuser@example.com\" as \"customer\""},{"id":"0b70e810-11d2-4a33-b7f8-87482b1fa666","location":{"line":12,"column":5},"keyword":"Then ","keywordType":"Outcome","text":"an OTP email should be sent to \"newuser@example.com\""},{"id":"eed92f5f-ed06-4867-968f-85cbd6a69ec2","location":{"line":13,"column":5},"keyword":"And ","keywordType":"Conjunction","text":"I should be able to access the user profile"}],"examples":[]}},{"scenario":{"id":"9e501798-f375-42ff-80c3-3c8ccc7e286a","tags":[],"location":{"line":15,"column":3},"keyword":"Scenario","name":"Login - OTP authentication for existing user","description":"","steps":[{"id":"67fcea34-691b-42ce-a0e2-30742f5c84a1","location":{"line":16,"column":5},"keyword":"When ","keywordType":"Action","text":"I authenticate with email \"existinguser@example.com\" as \"customer\""},{"id":"bc17a649-5d14-4c79-ab88-50e9aea06e7a","location":{"line":17,"column":5},"keyword":"Then ","keywordType":"Outcome","text":"an OTP email should be sent to \"existinguser@example.com\""},{"id":"aba9adb1-eb36-40d6-86bf-98bbc57ee8dd","location":{"line":18,"column":5},"keyword":"And ","keywordType":"Conjunction","text":"I should be able to access the user profile"}],"examples":[]}},{"scenario":{"id":"b91d3235-0d78-4b95-82c9-524f7ebbb04c","tags":[],"location":{"line":20,"column":3},"keyword":"Scenario","name":"Registration - Fleet owner OTP authentication","description":"","steps":[{"id":"70a5099b-fbbb-4385-aa2e-be5caed4693f","location":{"line":21,"column":5},"keyword":"When ","keywordType":"Action","text":"I register with email \"fleetowner@example.com\" as \"fleetOwner\""},{"id":"d2772c53-09c6-462e-b321-8be536edc4ad","location":{"line":22,"column":5},"keyword":"Then ","keywordType":"Outcome","text":"an OTP email should be sent to \"fleetowner@example.com\""},{"id":"668259e0-b52a-4efc-8816-495e9ab82a3f","location":{"line":23,"column":5},"keyword":"And ","keywordType":"Conjunction","text":"I should be able to access the user profile"}],"examples":[]}},{"scenario":{"id":"c621bb82-bb1d-4407-b3ed-514602900562","tags":[],"location":{"line":25,"column":3},"keyword":"Scenario","name":"Secure logout - Token invalidation and session cleanup","description":"","steps":[{"id":"a5007be7-a4a8-43df-b908-a1b33d8a9974","location":{"line":26,"column":5},"keyword":"Given ","keywordType":"Context","text":"I authenticate with email \"testuser@example.com\" as \"customer\""},{"id":"a25fb74e-e582-4977-89af-4995ce005fce","location":{"line":27,"column":5},"keyword":"When ","keywordType":"Action","text":"I logout"},{"id":"f5ede218-a532-477b-8b06-6f1f3c326e94","location":{"line":28,"column":5},"keyword":"Then ","keywordType":"Outcome","text":"I should not be able to access the user profile"}],"examples":[]}},{"scenario":{"id":"6c0bb75e-c14c-4323-90d0-0047ce890e28","tags":[],"location":{"line":30,"column":3},"keyword":"Scenario","name":"Fleet owner logout - Complete session termination","description":"","steps":[{"id":"ddbf64b3-6229-485e-bf0e-8317c6b46234","location":{"line":31,"column":5},"keyword":"Given ","keywordType":"Context","text":"I register with email \"fleetowner.logout@example.com\" as \"fleetOwner\""},{"id":"6280c821-6759-4865-b801-c54b7c56153e","location":{"line":32,"column":5},"keyword":"When ","keywordType":"Action","text":"I logout"},{"id":"47db6f4d-0fec-4008-8ef1-f3ad3cb77a14","location":{"line":33,"column":5},"keyword":"Then ","keywordType":"Outcome","text":"I should not be able to access the user profile"}],"examples":[]}}]},"comments":[],"uri":"test/features/authentication/otp-authentication.feature"}},{"pickle":{"id":"11d06816-f54a-447e-96fa-760017fb49d9","uri":"test/features/authentication/otp-authentication.feature","astNodeIds":["57d2bc37-64ba-4029-ac29-25c3df13bd96"],"tags":[{"name":"@only","astNodeId":"d831b33e-203c-48b4-a7d9-d046973cc478"},{"name":"@api","astNodeId":"576c3f19-6791-43eb-8023-6321d8aee492"},{"name":"@authentication","astNodeId":"65dbbf16-792a-4360-8c43-71e5601979a5"}],"name":"Registration - OTP authentication for new user","language":"en","steps":[{"id":"7e9f8d50-40c5-4338-9806-2fa65c0bc6f6","text":"the notification mock is cleared","type":"Context","astNodeIds":["ff4e5486-57a7-4f52-8476-a7144a790bbc"]},{"id":"dba6696c-7b6e-49e0-8275-62edc97660a1","text":"I register with email \"newuser@example.com\" as \"customer\"","type":"Action","astNodeIds":["99d09543-8b8a-4d47-8d67-0bcebcf230e3"]},{"id":"dde4c46c-4c71-4921-890b-87ddf7bc43c0","text":"an OTP email should be sent to \"newuser@example.com\"","type":"Outcome","astNodeIds":["0b70e810-11d2-4a33-b7f8-87482b1fa666"]},{"id":"56f800fa-7124-4c99-a6d7-d510a81bf905","text":"I should be able to access the user profile","type":"Outcome","astNodeIds":["eed92f5f-ed06-4867-968f-85cbd6a69ec2"]}]}},{"pickle":{"id":"f505ed84-d200-4aea-b141-cd06af3b8bad","uri":"test/features/authentication/otp-authentication.feature","astNodeIds":["9e501798-f375-42ff-80c3-3c8ccc7e286a"],"tags":[{"name":"@only","astNodeId":"d831b33e-203c-48b4-a7d9-d046973cc478"},{"name":"@api","astNodeId":"576c3f19-6791-43eb-8023-6321d8aee492"},{"name":"@authentication","astNodeId":"65dbbf16-792a-4360-8c43-71e5601979a5"}],"name":"Login - OTP authentication for existing user","language":"en","steps":[{"id":"0375c69d-bf5a-4d64-81e0-68c6d33363b0","text":"the notification mock is cleared","type":"Context","astNodeIds":["ff4e5486-57a7-4f52-8476-a7144a790bbc"]},{"id":"2b1631fb-0649-4c2b-b719-d8db5667610f","text":"I authenticate with email \"existinguser@example.com\" as \"customer\"","type":"Action","astNodeIds":["67fcea34-691b-42ce-a0e2-30742f5c84a1"]},{"id":"2370bf98-bb3c-4097-9a77-9037571ec800","text":"an OTP email should be sent to \"existinguser@example.com\"","type":"Outcome","astNodeIds":["bc17a649-5d14-4c79-ab88-50e9aea06e7a"]},{"id":"f1716394-05d8-4dcd-a237-d6de144568ce","text":"I should be able to access the user profile","type":"Outcome","astNodeIds":["aba9adb1-eb36-40d6-86bf-98bbc57ee8dd"]}]}},{"pickle":{"id":"457029ff-e469-449f-8e76-26a9167d4b7a","uri":"test/features/authentication/otp-authentication.feature","astNodeIds":["b91d3235-0d78-4b95-82c9-524f7ebbb04c"],"tags":[{"name":"@only","astNodeId":"d831b33e-203c-48b4-a7d9-d046973cc478"},{"name":"@api","astNodeId":"576c3f19-6791-43eb-8023-6321d8aee492"},{"name":"@authentication","astNodeId":"65dbbf16-792a-4360-8c43-71e5601979a5"}],"name":"Registration - Fleet owner OTP authentication","language":"en","steps":[{"id":"d3322c49-5108-47d3-9f7e-aa979888b255","text":"the notification mock is cleared","type":"Context","astNodeIds":["ff4e5486-57a7-4f52-8476-a7144a790bbc"]},{"id":"09f9a2cf-9bae-4e02-8980-fa65fe2a5770","text":"I register with email \"fleetowner@example.com\" as \"fleetOwner\"","type":"Action","astNodeIds":["70a5099b-fbbb-4385-aa2e-be5caed4693f"]},{"id":"a6a768a3-1140-4a71-b29c-25e99092d328","text":"an OTP email should be sent to \"fleetowner@example.com\"","type":"Outcome","astNodeIds":["d2772c53-09c6-462e-b321-8be536edc4ad"]},{"id":"ae81a159-edb6-4434-a405-e9d0db1ce8d6","text":"I should be able to access the user profile","type":"Outcome","astNodeIds":["668259e0-b52a-4efc-8816-495e9ab82a3f"]}]}},{"pickle":{"id":"3450105a-a95d-4d3b-9bc2-d08a5d13e044","uri":"test/features/authentication/otp-authentication.feature","astNodeIds":["c621bb82-bb1d-4407-b3ed-514602900562"],"tags":[{"name":"@only","astNodeId":"d831b33e-203c-48b4-a7d9-d046973cc478"},{"name":"@api","astNodeId":"576c3f19-6791-43eb-8023-6321d8aee492"},{"name":"@authentication","astNodeId":"65dbbf16-792a-4360-8c43-71e5601979a5"}],"name":"Secure logout - Token invalidation and session cleanup","language":"en","steps":[{"id":"64bc9f3d-9a50-4ff2-ac4e-4c84bf354374","text":"the notification mock is cleared","type":"Context","astNodeIds":["ff4e5486-57a7-4f52-8476-a7144a790bbc"]},{"id":"e488e3e2-cc94-457f-a124-044ba31bbfa0","text":"I authenticate with email \"testuser@example.com\" as \"customer\"","type":"Context","astNodeIds":["a5007be7-a4a8-43df-b908-a1b33d8a9974"]},{"id":"bdcf5d70-715d-4987-9aa0-6f29ba7785c0","text":"I logout","type":"Action","astNodeIds":["a25fb74e-e582-4977-89af-4995ce005fce"]},{"id":"77cfcc97-0ce9-4a91-a989-171ef9cb3915","text":"I should not be able to access the user profile","type":"Outcome","astNodeIds":["f5ede218-a532-477b-8b06-6f1f3c326e94"]}]}},{"pickle":{"id":"21005918-6e56-4064-9e1a-53745f02af02","uri":"test/features/authentication/otp-authentication.feature","astNodeIds":["6c0bb75e-c14c-4323-90d0-0047ce890e28"],"tags":[{"name":"@only","astNodeId":"d831b33e-203c-48b4-a7d9-d046973cc478"},{"name":"@api","astNodeId":"576c3f19-6791-43eb-8023-6321d8aee492"},{"name":"@authentication","astNodeId":"65dbbf16-792a-4360-8c43-71e5601979a5"}],"name":"Fleet owner logout - Complete session termination","language":"en","steps":[{"id":"712d86eb-5be0-4149-bcdb-99fbb4d792fa","text":"the notification mock is cleared","type":"Context","astNodeIds":["ff4e5486-57a7-4f52-8476-a7144a790bbc"]},{"id":"2dd378ea-9009-4d80-af16-56bd0ca1e5fa","text":"I register with email \"fleetowner.logout@example.com\" as \"fleetOwner\"","type":"Context","astNodeIds":["ddbf64b3-6229-485e-bf0e-8317c6b46234"]},{"id":"ef50f97a-266e-43a9-940f-4b7af40876d0","text":"I logout","type":"Action","astNodeIds":["6280c821-6759-4865-b801-c54b7c56153e"]},{"id":"8cfc7b89-5500-460e-86c2-a5f90bd10aab","text":"I should not be able to access the user profile","type":"Outcome","astNodeIds":["47db6f4d-0fec-4008-8ef1-f3ad3cb77a14"]}]}},{"source":{"data":"# @skip @api @booking @skip\n# Feature: Booking Lifecycle Management\n#   As a system\n#   I want to manage booking state transitions\n#   So that bookings progress through their lifecycle correctly\n\n#   Background:\n#     Given a booking exists with id \"booking-123\" in \"confirmed\" status\n#     And the booking has a valid payment\n\n#   @state-transition\n#   Scenario: Activate confirmed booking with payment\n#     When I activate booking \"booking-123\" with payment \"payment-456\"\n#     Then the response status should be 200\n#     And the booking status should be \"active\"\n#     And the booking should have payment id \"payment-456\"\n\n#   @state-transition\n#   Scenario: Complete active booking\n#     Given booking \"booking-123\" is in \"active\" status\n#     And the booking end time has passed\n#     When I complete booking \"booking-123\"\n#     Then the response status should be 200\n#     And the booking status should be \"completed\"\n\n#   @cancellation\n#   Scenario: Cancel booking within cancellation period\n#     Given booking \"booking-123\" is in \"confirmed\" status\n#     And the booking starts in 48 hours\n#     When I cancel booking \"booking-123\" with reason \"Change of plans\"\n#     Then the response status should be 200\n#     And the booking status should be \"cancelled\"\n#     And a refund should be initiated\n\n#   @cancellation\n#   Scenario: Cannot cancel booking within 24 hours\n#     Given booking \"booking-123\" is in \"confirmed\" status\n#     And the booking starts in 12 hours\n#     When I cancel booking \"booking-123\" with reason \"Emergency\"\n#     Then the response status should be 400\n#     And the error message should contain \"Cannot cancel within 24 hours\"","uri":"test/features/booking/booking-lifecycle.feature","mediaType":"text/x.cucumber.gherkin+plain"}},{"gherkinDocument":{"comments":[{"location":{"line":1,"column":1},"text":"# @skip @api @booking @skip"},{"location":{"line":2,"column":1},"text":"# Feature: Booking Lifecycle Management"},{"location":{"line":3,"column":1},"text":"#   As a system"},{"location":{"line":4,"column":1},"text":"#   I want to manage booking state transitions"},{"location":{"line":5,"column":1},"text":"#   So that bookings progress through their lifecycle correctly"},{"location":{"line":7,"column":1},"text":"#   Background:"},{"location":{"line":8,"column":1},"text":"#     Given a booking exists with id \"booking-123\" in \"confirmed\" status"},{"location":{"line":9,"column":1},"text":"#     And the booking has a valid payment"},{"location":{"line":11,"column":1},"text":"#   @state-transition"},{"location":{"line":12,"column":1},"text":"#   Scenario: Activate confirmed booking with payment"},{"location":{"line":13,"column":1},"text":"#     When I activate booking \"booking-123\" with payment \"payment-456\""},{"location":{"line":14,"column":1},"text":"#     Then the response status should be 200"},{"location":{"line":15,"column":1},"text":"#     And the booking status should be \"active\""},{"location":{"line":16,"column":1},"text":"#     And the booking should have payment id \"payment-456\""},{"location":{"line":18,"column":1},"text":"#   @state-transition"},{"location":{"line":19,"column":1},"text":"#   Scenario: Complete active booking"},{"location":{"line":20,"column":1},"text":"#     Given booking \"booking-123\" is in \"active\" status"},{"location":{"line":21,"column":1},"text":"#     And the booking end time has passed"},{"location":{"line":22,"column":1},"text":"#     When I complete booking \"booking-123\""},{"location":{"line":23,"column":1},"text":"#     Then the response status should be 200"},{"location":{"line":24,"column":1},"text":"#     And the booking status should be \"completed\""},{"location":{"line":26,"column":1},"text":"#   @cancellation"},{"location":{"line":27,"column":1},"text":"#   Scenario: Cancel booking within cancellation period"},{"location":{"line":28,"column":1},"text":"#     Given booking \"booking-123\" is in \"confirmed\" status"},{"location":{"line":29,"column":1},"text":"#     And the booking starts in 48 hours"},{"location":{"line":30,"column":1},"text":"#     When I cancel booking \"booking-123\" with reason \"Change of plans\""},{"location":{"line":31,"column":1},"text":"#     Then the response status should be 200"},{"location":{"line":32,"column":1},"text":"#     And the booking status should be \"cancelled\""},{"location":{"line":33,"column":1},"text":"#     And a refund should be initiated"},{"location":{"line":35,"column":1},"text":"#   @cancellation"},{"location":{"line":36,"column":1},"text":"#   Scenario: Cannot cancel booking within 24 hours"},{"location":{"line":37,"column":1},"text":"#     Given booking \"booking-123\" is in \"confirmed\" status"},{"location":{"line":38,"column":1},"text":"#     And the booking starts in 12 hours"},{"location":{"line":39,"column":1},"text":"#     When I cancel booking \"booking-123\" with reason \"Emergency\""},{"location":{"line":40,"column":1},"text":"#     Then the response status should be 400"},{"location":{"line":41,"column":1},"text":"#     And the error message should contain \"Cannot cancel within 24 hours\""}],"uri":"test/features/booking/booking-lifecycle.feature"}},{"source":{"data":"# @skip @api @booking\n# Feature: Booking Creation\n#   As a customer\n#   I want to create bookings for chauffeur services\n#   So that I can reserve transportation\n\n  Background:\n    Given an \"customer\" user \"customer\"\n    And I am authenticated as user \"customer\"\n    And a fleet owner \"fleet-owner\" has uploaded a car with registration \"car\"\n    # And a car is available with id \"car-456\"\n    # And current date is \"2025-08-10\"\n\n#   @smoke\n#   Scenario: Successfully create a booking\n#     Given I am authenticated as customer \"customer-123\"\n#     # When I create a booking with the following details:\n#     #   | customerId      | customer-123            |\n#     #   | carId           | car-456                 |\n#     #   | startDate       | 2025-08-15T09:00:00Z    |\n#     #   | endDate         | 2025-08-15T17:00:00Z    |\n#     #   | pickupLocation  | 123 Main St, London     |\n#     #   | returnLocation  | 456 Office Ave, London  |\n#     #   | bookingType     | hourly                  |\n#     # Then the response status should be 201\n#     # And the response should contain a booking id\n#     # And the booking should have status \"pending\"\n#     # And the booking should have the correct cost calculation\n\n#   @validation @skip\n#   Scenario Outline: Booking creation validation\n#     Given I am authenticated as customer \"customer-123\"\n#     When I create a booking with invalid data:\n#       | field   | value           |\n#       | <field> | <invalid_value> |\n#     Then the response status should be 400\n#     And the error message should contain \"<error_message>\"\n\n#     Examples:\n#       | field           | invalid_value         | error_message          |\n#       | customerId      |                       | customerId is required |\n#       | carId           | invalid-uuid          | Invalid uuid           |\n#       | startDate       | invalid-date          | Invalid datetime       |\n#       | endDate         | 2025-08-01T09:00:00Z  | must be in the future  |\n#       | pickupLocation  |                       | Address is required    |\n\n#   @business-rules @skip\n#   Scenario: Cannot create booking for past dates\n#     Given I am authenticated as customer \"customer-123\"\n#     When I create a booking with start date \"2025-08-01T09:00:00Z\"\n#     Then the response status should be 400\n#     And the error message should contain \"Booking time must be in the future\"\n\n#   @business-rules @skip\n#   Scenario: Cannot create booking when car is not available\n#     Given I am authenticated as customer \"customer-123\"\n#     And car \"car-456\" is not available on \"2025-08-15\"\n#     When I create a booking for car \"car-456\" on \"2025-08-15\"\n#     Then the response status should be 409\n#     And the error message should contain \"Car not available\"","uri":"test/features/booking/create-booking.feature","mediaType":"text/x.cucumber.gherkin+plain"}},{"parseError":{"source":{"uri":"test/features/booking/create-booking.feature","location":{"line":7,"column":3}},"message":"(7:3): expected: #EOF, #Language, #TagLine, #FeatureLine, #Comment, #Empty, got 'Background:'"}},{"parseError":{"source":{"uri":"test/features/booking/create-booking.feature","location":{"line":8,"column":5}},"message":"(8:5): expected: #EOF, #Language, #TagLine, #FeatureLine, #Comment, #Empty, got 'Given an \"customer\" user \"customer\"'"}},{"parseError":{"source":{"uri":"test/features/booking/create-booking.feature","location":{"line":9,"column":5}},"message":"(9:5): expected: #EOF, #Language, #TagLine, #FeatureLine, #Comment, #Empty, got 'And I am authenticated as user \"customer\"'"}},{"parseError":{"source":{"uri":"test/features/booking/create-booking.feature","location":{"line":10,"column":5}},"message":"(10:5): expected: #EOF, #Language, #TagLine, #FeatureLine, #Comment, #Empty, got 'And a fleet owner \"fleet-owner\" has uploaded a car with registration \"car\"'"}},{"source":{"data":"@fleet @upload-car\nFeature: Upload a car to a fleet\n  As a fleet owner\n  I want to upload a car to my fleet\n  So that I can rent it out to customers\n\n  Scenario: Upload a car to a fleet\n    Given an \"fleetOwner\" user \"fleetOwner\"\n    And I am authenticated as user \"fleetOwner\"\n    When I upload a car with the following details\n      | make   | model | year | color | registrationNumber | dayRate | nightRate | hourlyRate |\n      | Toyota | Camry | 2022 | Black | ABC123XX           | 150.00  | 120.00    | 25.00      |\n    Then the car should be uploaded successfully\n    And the car should be pending approval\n","uri":"test/features/fleet/upload-car.feature","mediaType":"text/x.cucumber.gherkin+plain"}},{"gherkinDocument":{"feature":{"tags":[{"location":{"line":1,"column":1},"name":"@fleet","id":"4bec5e8a-27b2-42ae-adce-fa89000c0ee9"},{"location":{"line":1,"column":8},"name":"@upload-car","id":"43b4e8db-541b-4177-ac3b-059f2fa98a7c"}],"location":{"line":2,"column":1},"language":"en","keyword":"Feature","name":"Upload a car to a fleet","description":"  As a fleet owner\n  I want to upload a car to my fleet\n  So that I can rent it out to customers","children":[{"scenario":{"id":"b6989521-73d1-418b-9a1e-6889ba78a435","tags":[],"location":{"line":7,"column":3},"keyword":"Scenario","name":"Upload a car to a fleet","description":"","steps":[{"id":"5b7a8df1-2c12-4ecc-9896-3d9217da3b11","location":{"line":8,"column":5},"keyword":"Given ","keywordType":"Context","text":"an \"fleetOwner\" user \"fleetOwner\""},{"id":"81bf5d0e-b9d1-4507-8f94-d46bfccb2092","location":{"line":9,"column":5},"keyword":"And ","keywordType":"Conjunction","text":"I am authenticated as user \"fleetOwner\""},{"id":"f6dbca68-cfd4-4f45-a038-2f00f58035b5","location":{"line":10,"column":5},"keyword":"When ","keywordType":"Action","text":"I upload a car with the following details","dataTable":{"location":{"line":11,"column":7},"rows":[{"id":"bc57b1f1-b92e-497b-bb56-b884349af15c","location":{"line":11,"column":7},"cells":[{"location":{"line":11,"column":9},"value":"make"},{"location":{"line":11,"column":18},"value":"model"},{"location":{"line":11,"column":26},"value":"year"},{"location":{"line":11,"column":33},"value":"color"},{"location":{"line":11,"column":41},"value":"registrationNumber"},{"location":{"line":11,"column":62},"value":"dayRate"},{"location":{"line":11,"column":72},"value":"nightRate"},{"location":{"line":11,"column":84},"value":"hourlyRate"}]},{"id":"1c042ec1-c46f-4bfe-881f-49d007d92b95","location":{"line":12,"column":7},"cells":[{"location":{"line":12,"column":9},"value":"Toyota"},{"location":{"line":12,"column":18},"value":"Camry"},{"location":{"line":12,"column":26},"value":"2022"},{"location":{"line":12,"column":33},"value":"Black"},{"location":{"line":12,"column":41},"value":"ABC123XX"},{"location":{"line":12,"column":62},"value":"150.00"},{"location":{"line":12,"column":72},"value":"120.00"},{"location":{"line":12,"column":84},"value":"25.00"}]}]}},{"id":"0d8faca0-1267-4608-9f6b-70eb986520b8","location":{"line":13,"column":5},"keyword":"Then ","keywordType":"Outcome","text":"the car should be uploaded successfully"},{"id":"07890d4e-4970-4fb9-8a97-5608239eb32d","location":{"line":14,"column":5},"keyword":"And ","keywordType":"Conjunction","text":"the car should be pending approval"}],"examples":[]}}]},"comments":[],"uri":"test/features/fleet/upload-car.feature"}},{"pickle":{"id":"0afe5d8c-965d-4734-8333-09ddb7421c4e","uri":"test/features/fleet/upload-car.feature","astNodeIds":["b6989521-73d1-418b-9a1e-6889ba78a435"],"tags":[{"name":"@fleet","astNodeId":"4bec5e8a-27b2-42ae-adce-fa89000c0ee9"},{"name":"@upload-car","astNodeId":"43b4e8db-541b-4177-ac3b-059f2fa98a7c"}],"name":"Upload a car to a fleet","language":"en","steps":[{"id":"00bcf47a-75e8-4bd3-ae21-0a25b7cc8f87","text":"an \"fleetOwner\" user \"fleetOwner\"","type":"Context","astNodeIds":["5b7a8df1-2c12-4ecc-9896-3d9217da3b11"]},{"id":"5f6d2335-fb72-4d58-99b3-9856f03bdcd8","text":"I am authenticated as user \"fleetOwner\"","type":"Context","astNodeIds":["81bf5d0e-b9d1-4507-8f94-d46bfccb2092"]},{"id":"4ee8e1d2-5de1-45c6-87a3-964010fca61d","text":"I upload a car with the following details","type":"Action","argument":{"dataTable":{"rows":[{"cells":[{"value":"make"},{"value":"model"},{"value":"year"},{"value":"color"},{"value":"registrationNumber"},{"value":"dayRate"},{"value":"nightRate"},{"value":"hourlyRate"}]},{"cells":[{"value":"Toyota"},{"value":"Camry"},{"value":"2022"},{"value":"Black"},{"value":"ABC123XX"},{"value":"150.00"},{"value":"120.00"},{"value":"25.00"}]}]}},"astNodeIds":["f6dbca68-cfd4-4f45-a038-2f00f58035b5"]},{"id":"33bd2bd2-9cf2-4f74-a2aa-a8683239c733","text":"the car should be uploaded successfully","type":"Outcome","astNodeIds":["0d8faca0-1267-4608-9f6b-70eb986520b8"]},{"id":"957c84a5-907b-49a6-8e5b-cbafa50e037c","text":"the car should be pending approval","type":"Outcome","astNodeIds":["07890d4e-4970-4fb9-8a97-5608239eb32d"]}]}},{"source":{"data":"@api @user-management\nFeature: Add staff for approvals\n  As an admin\n  I want to add a staff member to the platform\n  So that they can approve fleet owners and cars\n\n  Scenario: Successfully add staff member\n    Given an \"admin\" user \"admin\"\n    And I am authenticated as user \"admin\"\n    When \"admin\" adds a staff member with the following details\n      | name     | email                | role  |\n      | John Doe | john.doe@example.com | staff |\n    Then staff \"John Doe\" should be created with email \"john.doe@example.com\"\n\n  @authorization\n  Scenario Outline: Role-based authorization for adding staff\n    Given a \"<role>\" user \"<userKey>\"\n    And I am authenticated as user \"<userKey>\"\n    When \"<userKey>\" adds a staff member with the following details\n      | name      | email                 | role  |\n      | New Staff | new.staff@example.com | staff |\n    Then should error with \"<errorMessage>\"\n\n    Examples:\n      | role       | userKey    | errorMessage                         |\n      | staff      | staff      | Access denied. Required roles: admin |\n      | fleetOwner | fleetOwner | Access denied. Required roles: admin |\n      | chauffeur  | chauffeur  | Access denied. Required roles: admin |\n      | customer   | customer   | Access denied. Required roles: admin |\n","uri":"test/features/user-manangement/add-staff.feature","mediaType":"text/x.cucumber.gherkin+plain"}},{"gherkinDocument":{"feature":{"tags":[{"location":{"line":1,"column":1},"name":"@api","id":"c088a438-6d25-40f8-9a39-248d73bebb4b"},{"location":{"line":1,"column":6},"name":"@user-management","id":"763e2413-1cb4-4603-9b40-cb77cef474fe"}],"location":{"line":2,"column":1},"language":"en","keyword":"Feature","name":"Add staff for approvals","description":"  As an admin\n  I want to add a staff member to the platform\n  So that they can approve fleet owners and cars","children":[{"scenario":{"id":"7150fa2f-4279-4769-b242-f1594b605056","tags":[],"location":{"line":7,"column":3},"keyword":"Scenario","name":"Successfully add staff member","description":"","steps":[{"id":"119e7f08-927b-451d-a2ed-79ed0c4d2ec6","location":{"line":8,"column":5},"keyword":"Given ","keywordType":"Context","text":"an \"admin\" user \"admin\""},{"id":"5fa3cec3-b5b2-4610-8323-7d7fa7f815d2","location":{"line":9,"column":5},"keyword":"And ","keywordType":"Conjunction","text":"I am authenticated as user \"admin\""},{"id":"194e588f-33c4-4aae-a436-ccf7e1ccc919","location":{"line":10,"column":5},"keyword":"When ","keywordType":"Action","text":"\"admin\" adds a staff member with the following details","dataTable":{"location":{"line":11,"column":7},"rows":[{"id":"b9ecccfe-05f8-4deb-aab3-0ce529fa8eb7","location":{"line":11,"column":7},"cells":[{"location":{"line":11,"column":9},"value":"name"},{"location":{"line":11,"column":20},"value":"email"},{"location":{"line":11,"column":43},"value":"role"}]},{"id":"8479b475-3377-41d5-b113-e789e99f36db","location":{"line":12,"column":7},"cells":[{"location":{"line":12,"column":9},"value":"John Doe"},{"location":{"line":12,"column":20},"value":"john.doe@example.com"},{"location":{"line":12,"column":43},"value":"staff"}]}]}},{"id":"e9ba845f-966d-4aff-a34d-645d67b8567e","location":{"line":13,"column":5},"keyword":"Then ","keywordType":"Outcome","text":"staff \"John Doe\" should be created with email \"john.doe@example.com\""}],"examples":[]}},{"scenario":{"id":"68af1da7-157e-41d8-94ab-1dec8ac2c3c4","tags":[{"location":{"line":15,"column":3},"name":"@authorization","id":"3e31e470-5f3b-4c3d-94fd-31982d911f1e"}],"location":{"line":16,"column":3},"keyword":"Scenario Outline","name":"Role-based authorization for adding staff","description":"","steps":[{"id":"21501d9c-b4a6-4ee6-b98b-94c35a5b2a9a","location":{"line":17,"column":5},"keyword":"Given ","keywordType":"Context","text":"a \"<role>\" user \"<userKey>\""},{"id":"db3a7896-3a8c-41d5-add4-fc50797a0be6","location":{"line":18,"column":5},"keyword":"And ","keywordType":"Conjunction","text":"I am authenticated as user \"<userKey>\""},{"id":"d15be164-c42e-43d2-91ea-17d5eae65a7d","location":{"line":19,"column":5},"keyword":"When ","keywordType":"Action","text":"\"<userKey>\" adds a staff member with the following details","dataTable":{"location":{"line":20,"column":7},"rows":[{"id":"53087c04-6a8f-4beb-8184-c48fa6760ed0","location":{"line":20,"column":7},"cells":[{"location":{"line":20,"column":9},"value":"name"},{"location":{"line":20,"column":21},"value":"email"},{"location":{"line":20,"column":45},"value":"role"}]},{"id":"8a7d4bd5-c6c3-40a2-816c-c427b3db100b","location":{"line":21,"column":7},"cells":[{"location":{"line":21,"column":9},"value":"New Staff"},{"location":{"line":21,"column":21},"value":"new.staff@example.com"},{"location":{"line":21,"column":45},"value":"staff"}]}]}},{"id":"4bc434a1-4a61-4172-ba89-f2b9e0be47fa","location":{"line":22,"column":5},"keyword":"Then ","keywordType":"Outcome","text":"should error with \"<errorMessage>\""}],"examples":[{"id":"0e3313e1-b3d0-410b-8fee-59dd02875a54","tags":[],"location":{"line":24,"column":5},"keyword":"Examples","name":"","description":"","tableHeader":{"id":"b8688a4b-4f52-4848-b1ad-76b4036d7779","location":{"line":25,"column":7},"cells":[{"location":{"line":25,"column":9},"value":"role"},{"location":{"line":25,"column":22},"value":"userKey"},{"location":{"line":25,"column":35},"value":"errorMessage"}]},"tableBody":[{"id":"77ee960c-2769-44d5-bedd-68c186958262","location":{"line":26,"column":7},"cells":[{"location":{"line":26,"column":9},"value":"staff"},{"location":{"line":26,"column":22},"value":"staff"},{"location":{"line":26,"column":35},"value":"Access denied. Required roles: admin"}]},{"id":"49824ff9-8415-4eed-ae8d-ed765784507d","location":{"line":27,"column":7},"cells":[{"location":{"line":27,"column":9},"value":"fleetOwner"},{"location":{"line":27,"column":22},"value":"fleetOwner"},{"location":{"line":27,"column":35},"value":"Access denied. Required roles: admin"}]},{"id":"48a41a65-c1df-419a-b156-63294d49fc9d","location":{"line":28,"column":7},"cells":[{"location":{"line":28,"column":9},"value":"chauffeur"},{"location":{"line":28,"column":22},"value":"chauffeur"},{"location":{"line":28,"column":35},"value":"Access denied. Required roles: admin"}]},{"id":"1c91e128-5a91-40ac-8289-99c78d4a8139","location":{"line":29,"column":7},"cells":[{"location":{"line":29,"column":9},"value":"customer"},{"location":{"line":29,"column":22},"value":"customer"},{"location":{"line":29,"column":35},"value":"Access denied. Required roles: admin"}]}]}]}}]},"comments":[],"uri":"test/features/user-manangement/add-staff.feature"}},{"pickle":{"id":"c961cf90-908e-4205-a004-9e8c3a42e281","uri":"test/features/user-manangement/add-staff.feature","astNodeIds":["7150fa2f-4279-4769-b242-f1594b605056"],"tags":[{"name":"@api","astNodeId":"c088a438-6d25-40f8-9a39-248d73bebb4b"},{"name":"@user-management","astNodeId":"763e2413-1cb4-4603-9b40-cb77cef474fe"}],"name":"Successfully add staff member","language":"en","steps":[{"id":"ab476c24-767d-4cca-ac92-cabe088fe7b0","text":"an \"admin\" user \"admin\"","type":"Context","astNodeIds":["119e7f08-927b-451d-a2ed-79ed0c4d2ec6"]},{"id":"53cd5f5f-16e3-4043-b0b3-3d1e6327cf6c","text":"I am authenticated as user \"admin\"","type":"Context","astNodeIds":["5fa3cec3-b5b2-4610-8323-7d7fa7f815d2"]},{"id":"5fdb7456-df5c-45a6-aba4-61b0bdeaba68","text":"\"admin\" adds a staff member with the following details","type":"Action","argument":{"dataTable":{"rows":[{"cells":[{"value":"name"},{"value":"email"},{"value":"role"}]},{"cells":[{"value":"John Doe"},{"value":"john.doe@example.com"},{"value":"staff"}]}]}},"astNodeIds":["194e588f-33c4-4aae-a436-ccf7e1ccc919"]},{"id":"3bbceede-4a4f-4d0a-8e0c-b2afddef2e11","text":"staff \"John Doe\" should be created with email \"john.doe@example.com\"","type":"Outcome","astNodeIds":["e9ba845f-966d-4aff-a34d-645d67b8567e"]}]}},{"pickle":{"id":"f3ce2210-4bd5-4740-86e5-e2f36479edcf","uri":"test/features/user-manangement/add-staff.feature","astNodeIds":["68af1da7-157e-41d8-94ab-1dec8ac2c3c4","77ee960c-2769-44d5-bedd-68c186958262"],"name":"Role-based authorization for adding staff","language":"en","steps":[{"id":"a49e660d-32a8-4efe-a89f-63c6c8a902e3","text":"a \"staff\" user \"staff\"","type":"Context","astNodeIds":["21501d9c-b4a6-4ee6-b98b-94c35a5b2a9a","77ee960c-2769-44d5-bedd-68c186958262"]},{"id":"c656766e-23be-49c1-9eab-c39b17808eb3","text":"I am authenticated as user \"staff\"","type":"Context","astNodeIds":["db3a7896-3a8c-41d5-add4-fc50797a0be6","77ee960c-2769-44d5-bedd-68c186958262"]},{"id":"c4dc5ca1-3654-4c85-9833-8e2babc58f51","text":"\"staff\" adds a staff member with the following details","type":"Action","argument":{"dataTable":{"rows":[{"cells":[{"value":"name"},{"value":"email"},{"value":"role"}]},{"cells":[{"value":"New Staff"},{"value":"new.staff@example.com"},{"value":"staff"}]}]}},"astNodeIds":["d15be164-c42e-43d2-91ea-17d5eae65a7d","77ee960c-2769-44d5-bedd-68c186958262"]},{"id":"1a266e9a-7d06-42f5-9877-0d5cdb386862","text":"should error with \"Access denied. Required roles: admin\"","type":"Outcome","astNodeIds":["4bc434a1-4a61-4172-ba89-f2b9e0be47fa","77ee960c-2769-44d5-bedd-68c186958262"]}],"tags":[{"name":"@api","astNodeId":"c088a438-6d25-40f8-9a39-248d73bebb4b"},{"name":"@user-management","astNodeId":"763e2413-1cb4-4603-9b40-cb77cef474fe"},{"name":"@authorization","astNodeId":"3e31e470-5f3b-4c3d-94fd-31982d911f1e"}]}},{"pickle":{"id":"473f9b9b-213b-4c21-8ff7-3e3a5b8c7500","uri":"test/features/user-manangement/add-staff.feature","astNodeIds":["68af1da7-157e-41d8-94ab-1dec8ac2c3c4","49824ff9-8415-4eed-ae8d-ed765784507d"],"name":"Role-based authorization for adding staff","language":"en","steps":[{"id":"159c73fd-e792-4486-b6af-3952b4e6c604","text":"a \"fleetOwner\" user \"fleetOwner\"","type":"Context","astNodeIds":["21501d9c-b4a6-4ee6-b98b-94c35a5b2a9a","49824ff9-8415-4eed-ae8d-ed765784507d"]},{"id":"a003b44a-3890-4bc0-9d1d-9c54cc761f91","text":"I am authenticated as user \"fleetOwner\"","type":"Context","astNodeIds":["db3a7896-3a8c-41d5-add4-fc50797a0be6","49824ff9-8415-4eed-ae8d-ed765784507d"]},{"id":"a309a320-462f-4e0d-86ca-7d918c2226b0","text":"\"fleetOwner\" adds a staff member with the following details","type":"Action","argument":{"dataTable":{"rows":[{"cells":[{"value":"name"},{"value":"email"},{"value":"role"}]},{"cells":[{"value":"New Staff"},{"value":"new.staff@example.com"},{"value":"staff"}]}]}},"astNodeIds":["d15be164-c42e-43d2-91ea-17d5eae65a7d","49824ff9-8415-4eed-ae8d-ed765784507d"]},{"id":"53edbb77-a45b-401e-9d0d-d4c23e4c9056","text":"should error with \"Access denied. Required roles: admin\"","type":"Outcome","astNodeIds":["4bc434a1-4a61-4172-ba89-f2b9e0be47fa","49824ff9-8415-4eed-ae8d-ed765784507d"]}],"tags":[{"name":"@api","astNodeId":"c088a438-6d25-40f8-9a39-248d73bebb4b"},{"name":"@user-management","astNodeId":"763e2413-1cb4-4603-9b40-cb77cef474fe"},{"name":"@authorization","astNodeId":"3e31e470-5f3b-4c3d-94fd-31982d911f1e"}]}},{"pickle":{"id":"b2924c18-3770-49df-ad84-250b7aef58dd","uri":"test/features/user-manangement/add-staff.feature","astNodeIds":["68af1da7-157e-41d8-94ab-1dec8ac2c3c4","48a41a65-c1df-419a-b156-63294d49fc9d"],"name":"Role-based authorization for adding staff","language":"en","steps":[{"id":"cf2c53d1-9736-446f-837a-42e54f9e4519","text":"a \"chauffeur\" user \"chauffeur\"","type":"Context","astNodeIds":["21501d9c-b4a6-4ee6-b98b-94c35a5b2a9a","48a41a65-c1df-419a-b156-63294d49fc9d"]},{"id":"8fa1b722-b2cb-46ee-9c34-dbeed51cfb89","text":"I am authenticated as user \"chauffeur\"","type":"Context","astNodeIds":["db3a7896-3a8c-41d5-add4-fc50797a0be6","48a41a65-c1df-419a-b156-63294d49fc9d"]},{"id":"0c4f3865-8c7f-4bcf-b0f1-36139668fdaf","text":"\"chauffeur\" adds a staff member with the following details","type":"Action","argument":{"dataTable":{"rows":[{"cells":[{"value":"name"},{"value":"email"},{"value":"role"}]},{"cells":[{"value":"New Staff"},{"value":"new.staff@example.com"},{"value":"staff"}]}]}},"astNodeIds":["d15be164-c42e-43d2-91ea-17d5eae65a7d","48a41a65-c1df-419a-b156-63294d49fc9d"]},{"id":"886f98cf-897e-4f48-af49-7c753338ef12","text":"should error with \"Access denied. Required roles: admin\"","type":"Outcome","astNodeIds":["4bc434a1-4a61-4172-ba89-f2b9e0be47fa","48a41a65-c1df-419a-b156-63294d49fc9d"]}],"tags":[{"name":"@api","astNodeId":"c088a438-6d25-40f8-9a39-248d73bebb4b"},{"name":"@user-management","astNodeId":"763e2413-1cb4-4603-9b40-cb77cef474fe"},{"name":"@authorization","astNodeId":"3e31e470-5f3b-4c3d-94fd-31982d911f1e"}]}},{"pickle":{"id":"30c90ad3-cd16-4896-87a7-c708b56e53b3","uri":"test/features/user-manangement/add-staff.feature","astNodeIds":["68af1da7-157e-41d8-94ab-1dec8ac2c3c4","1c91e128-5a91-40ac-8289-99c78d4a8139"],"name":"Role-based authorization for adding staff","language":"en","steps":[{"id":"1a94e45a-bd7e-44da-b2ca-d94febf45c0b","text":"a \"customer\" user \"customer\"","type":"Context","astNodeIds":["21501d9c-b4a6-4ee6-b98b-94c35a5b2a9a","1c91e128-5a91-40ac-8289-99c78d4a8139"]},{"id":"ce31f899-c3de-4946-833b-87edeb149486","text":"I am authenticated as user \"customer\"","type":"Context","astNodeIds":["db3a7896-3a8c-41d5-add4-fc50797a0be6","1c91e128-5a91-40ac-8289-99c78d4a8139"]},{"id":"2c3bb8d5-aba4-4306-9da2-705073f9192e","text":"\"customer\" adds a staff member with the following details","type":"Action","argument":{"dataTable":{"rows":[{"cells":[{"value":"name"},{"value":"email"},{"value":"role"}]},{"cells":[{"value":"New Staff"},{"value":"new.staff@example.com"},{"value":"staff"}]}]}},"astNodeIds":["d15be164-c42e-43d2-91ea-17d5eae65a7d","1c91e128-5a91-40ac-8289-99c78d4a8139"]},{"id":"3f574aa8-18e9-4f0b-ba80-e7ca4afe3843","text":"should error with \"Access denied. Required roles: admin\"","type":"Outcome","astNodeIds":["4bc434a1-4a61-4172-ba89-f2b9e0be47fa","1c91e128-5a91-40ac-8289-99c78d4a8139"]}],"tags":[{"name":"@api","astNodeId":"c088a438-6d25-40f8-9a39-248d73bebb4b"},{"name":"@user-management","astNodeId":"763e2413-1cb4-4603-9b40-cb77cef474fe"},{"name":"@authorization","astNodeId":"3e31e470-5f3b-4c3d-94fd-31982d911f1e"}]}}